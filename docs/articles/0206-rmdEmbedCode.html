<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Embed and Execute R Code • useR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Embed and Execute R Code">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">useR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2019.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-book"></span>
     
    Getting Started
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/0101-gsSomeBackground.html">README 1st: Some Background</a>
    </li>
    <li>
      <a href="../articles/0102-gsGetStarted.html">Getting Started</a>
    </li>
    <li>
      <a href="../articles/0103-gsInstallR-RStudio.html">Install R and RStudio</a>
    </li>
    <li>
      <a href="../articles/0104-gsInstallJava.html">Install 64--bit Java on Windows Systems</a>
    </li>
    <li>
      <a href="../articles/0105-gsObtainCourseMaterial.html">Obtain Course Material</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-book"></span>
     
    RMarkdown
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/0201-rmdIntro.html">RMarkdown: Introduction</a>
    </li>
    <li>
      <a href="../articles/0202-rmdGetStarted.html">Getting Started</a>
    </li>
    <li>
      <a href="../articles/0203-rmdBuildingBlocks.html">RMarkdown Building Blocks</a>
    </li>
    <li>
      <a href="../articles/0204-rmdKNIT.html">KNIT the RMarkdown</a>
    </li>
    <li>
      <a href="../articles/0205-rmdGetCreative.html">Building Creative Documents</a>
    </li>
    <li>
      <a href="../articles/0206-rmdEmbedCode.html">Embed and Execute R Code</a>
    </li>
    <li>
      <a href="../articles/0207-rmdFinalExample.html">EXAMPLE: Finalized Document</a>
    </li>
    <li>
      <a href="../articles/0208-rmdAdditionalTopics.html">Some Additional Topics</a>
    </li>
    <li>
      <a href="../articles/0209-rmdPDFOutput.html">PDF Output from RMarkdown</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-book"></span>
     
    baseR
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Intro.html">XXIntroduction</a>
    </li>
    <li>
      <a href="../articles/Mod01.html">XXModule 1</a>
    </li>
    <li>
      <a href="../articles/Mod02.html">XXModule 2</a>
    </li>
    <li>
      <a href="../articles/Mod03.html">XXModule 3</a>
    </li>
    <li>
      <a href="../articles/Mod04.html">XXModule 4</a>
    </li>
    <li>
      <a href="../articles/Mod05.html">XXModule 5</a>
    </li>
    <li>
      <a href="../articles/Appendices.html">XXAppendices</a>
    </li>
    <li>
      <a href="../articles/4001-SupplDateTime.html">Supplemental: Date and Time</a>
    </li>
    <li>
      <a href="../articles/4002-Supplggplot2.html">Supplemental: ggplot2</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-book"></span>
     
    sdhmR
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/sdhmR-Introduction.html">XXIntroduction to SDHM</a>
    </li>
    <li>
      <a href="../articles/sdhmR-SetGoals.html">XXEstablishing SDHM Goals</a>
    </li>
    <li>
      <a href="../articles/sdhmR-DataAcqVetOrganize.html">XXData Acquisition, Vetting, and Organization</a>
    </li>
    <li>
      <a href="../articles/sdhmR-ModConstruct.html">XXModel Construction</a>
    </li>
    <li>
      <a href="../articles/sdhmR-ModAssess.html">XXModel Assessment</a>
    </li>
    <li>
      <a href="../articles/sdhmR-Ensembles.html">XXEnsemble SDHMs</a>
    </li>
    <li>
      <a href="../articles/sdhmR-FieldCampaigns.html">XXField Campaigns for SDHMs</a>
    </li>
    <li>
      <a href="../articles/sdhmR-ImplementSDHM.html">XXSDHM Implementation</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-book"></span>
     
    gisToolsR
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/gisR-Intro.html">XXIntroduction: GIS Using R</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Embed and Execute R Code</h1>
            
      
      
      <div class="hidden name"><code>0206-rmdEmbedCode.rmd</code></div>

    </div>

    
    
<!-- set root directory here

-->
<p>Last update: 10 September 2019 (V2019.2)</p>
<hr>
<div id="embedding-and-implementing-r-code-into-a-rmarkdown-document" class="section level2">
<h2 class="hasAnchor">
<a href="#embedding-and-implementing-r-code-into-a-rmarkdown-document" class="anchor"></a>Embedding and Implementing R Code into a RMarkdown Document</h2>
<p>In the first part we learned how add R code – the <strong>chunk</strong> – to a RMarkdown document. Now we’ll see some examples of how to embed R code into the document, and control the execution and output of the code depending on the desired final RMarkdown document.</p>
</div>
<div id="example-1-embedding-and-executing-r-code" class="section level2">
<h2 class="hasAnchor">
<a href="#example-1-embedding-and-executing-r-code" class="anchor"></a>EXAMPLE #1: Embedding and Executing R Code</h2>
<p>Let’s execute R code embedded in a RMarkdown document. For an example we will use a small cross–classified data structure examining fish selection by males and females of the piscivorous osprey <strong><em>Pandion haliaetus</em></strong>. Three types of fish – bass, shad, and sunfish – were available. A simple contingency analysis will be applied to the data.</p>
<p>This first <strong>chunk</strong> example imports a <code>.csv</code> file and examines the resulting dataframe structure. Note that output lines are preceded with <code>##</code> (two pound symbols); this helps distinguish code from output. All <strong>chunk</strong>’s in this example accept the default and return both the R code being evaluated and the output. This is so you can understand the <strong>chunk</strong> rendering process in RMarkdown.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># import data and examine dataframe characteristics</span></a>
<a class="sourceLine" id="cb1-2" title="2">  f1 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span>(<span class="st">"data/ospreypreybysex.csv"</span>, <span class="dt">header =</span> T)</a>
<a class="sourceLine" id="cb1-3" title="3">  <span class="kw"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(f1)  <span class="co"># examine dataframe structure</span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="co">#&gt; 'data.frame':    6 obs. of  3 variables:</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="co">#&gt;  $ ospreysex: Factor w/ 2 levels "Female","Male": 2 1 2 1 2 1</span></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="co">#&gt;  $ fishspp  : Factor w/ 3 levels "Bass","Shad",..: 3 3 1 1 2 2</span></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="co">#&gt;  $ count    : int  59 72 14 21 189 138</span></a></code></pre></div>
<p>Next, examine the cross–classified table of fish species captured by each sex.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="co"># cross-tabluation of captures by fish spp and osprey sex</span></a>
<a class="sourceLine" id="cb2-2" title="2">  f2 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/xtabs.html">xtabs</a></span>(count <span class="op">~</span><span class="st"> </span>ospreysex <span class="op">+</span><span class="st"> </span>fishspp, <span class="dt">data =</span> f1)  <span class="co"># cross-tab the data</span></a>
<a class="sourceLine" id="cb2-3" title="3">  f2  <span class="co"># cross-tab output</span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="co">#&gt;          fishspp</span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="co">#&gt; ospreysex Bass Shad Sunfish</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="co">#&gt;    Female   21  138      72</span></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="co">#&gt;    Male     14  189      59</span></a></code></pre></div>
<p>Last, apply the <span class="math inline">\(\chi^2\)</span> test to the data, write the output to the object <code>f3</code>, and see what output parameters are available from <code>f3</code>. We’ll explain why we did this in Example #2.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="co"># chi-sq test of cross-tab data</span></a>
<a class="sourceLine" id="cb3-2" title="2">  f3 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/chisq.test.html">chisq.test</a></span>(f2)  <span class="co"># chisq test</span></a>
<a class="sourceLine" id="cb3-3" title="3">  f3  <span class="co"># chi-sq output</span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="co">#&gt;  Pearson's Chi-squared test</span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="co">#&gt; data:  f2</span></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="co">#&gt; X-squared = 8.7294, df = 2, p-value = 0.01272</span></a>
<a class="sourceLine" id="cb3-9" title="9">  <span class="kw"><a href="https://rdrr.io/r/base/ls.html">ls</a></span>(f3)  <span class="co"># available output parameters from the chi-sq analysis</span></a>
<a class="sourceLine" id="cb3-10" title="10"><span class="co">#&gt; [1] "data.name" "expected"  "method"    "observed"  "p.value"   "parameter"</span></a>
<a class="sourceLine" id="cb3-11" title="11"><span class="co">#&gt; [7] "residuals" "statistic" "stdres"</span></a></code></pre></div>
<p><strong>NOTE</strong> that all three <strong>chunks</strong> include comments explaining the code actions.</p>
<hr>
</div>
<div id="example-2-converting-the-analysis-to-kings-english" class="section level2">
<h2 class="hasAnchor">
<a href="#example-2-converting-the-analysis-to-kings-english" class="anchor"></a>EXAMPLE #2: Converting the Analysis to King’s English</h2>
<p>If this were a classroom exercise, I – an instructor – would most likely wish to see all the code and output as shown in Example #1. That way I could evaluate your work and grade the exercise.</p>
<p>However, consider other circumstances where you wish to render the various <strong>chunk</strong> outputs into a sentence (or paragraph) of plain Ol’ King’s English. That sentence might be something like:</p>
<blockquote>
<p>A <span class="math inline">\(\chi^2\)</span> analysis indicates that male and female ospreys differentially selected fish species while foraging (<span class="math inline">\(\chi^2\)</span> = 8.729, <em>p</em> = 0.013, <em>df</em> = 2).</p>
</blockquote>
<p>Wow!</p>
<p>The analytical “answers” were (somehow) directly incorporated into the sentence. How was the coding that resulted in that sentence written?</p>
<p>First, examine the output of the <span class="math inline">\(\chi^2\)</span> analysis from above. <strong>NOTE</strong> the sentence has captured the output <span class="math inline">\(\chi^2\)</span> statistic, the degrees of freedom (<em>df</em>), and the <em>p</em>–value, and incorporated those values directly into the sentence using inline <strong>chunk</strong> code. The code that generated the sentence looks like this:</p>
<pre><code>#### chunk code as inline
A $\chi^2$ analysis indicates that male and female ospreys differentially selected fish 
species while foraging ($\chi^2$ = `r round(f3$statistic, 3)`, 
*p* = `r round(f3$p.value, 3)`, *df* = `r f3$parameter`).</code></pre>
<p>We first embedded mathematical syntax to print the symbology <span class="math inline">\(\chi^2\)</span>. Next notice how inline <strong>chunk</strong> coding was used three times to extract specified information from the output of the <span class="math inline">\(\chi^2\)</span> analysis, the object <code>f3</code> we created earlier. The <code><a href="https://rdrr.io/r/base/ls.html">ls(f3)</a></code> call had returned the output objects of the analysis, of which <code>statistic</code>, <code>p.value</code>, and <code>parameter</code> represent, respectively, the values of the <span class="math inline">\(\chi^2\)</span>, <em>p</em>-value, and <em>df</em>’s. (<strong>NOTE</strong>: Selection of correct output objects by name assumes working knowledge of R analysis and outputs.) These values were extracted using standard R coding, such as <code>f3$statistic</code>. We also applied the <code><a href="https://rdrr.io/r/base/Round.html">round()</a></code> function to the extracted values to reduce the number of significant digits carried over into the sentence.</p>
<p>There is nothing fancy here: these are basic R operations for extracting information from an analysis. We’ve merely used RMarkdown syntax to extract these values and embed them into a document.</p>
<p>Just imagine how useful this could be when writing reports !! (And your homework …)</p>
<hr>
</div>
<div id="example-3-extracting-and-presenting-tabular-information" class="section level2">
<h2 class="hasAnchor">
<a href="#example-3-extracting-and-presenting-tabular-information" class="anchor"></a>EXAMPLE #3: Extracting and Presenting Tabular Information</h2>
<p>A repeat of something stated above regarding tables in RMarkdown:</p>
<blockquote>
<p>“<em>Construction of data and text tables in RMarkdown can be frustrating and irritating, as well as visually unappealing when output, principally because RMarkdown does not actually support tables <strong>per se</strong>.</em>”</p>
</blockquote>
<p>Solutions do exist, but before we can produce more visually appealing tables in RMarkdown, some basic understanding of format control in a RMarkdown document is needed.</p>
<p>Control of RMarkdown output – and tables the document contains – can occur at two separate levels. The first is default RMarkdown syntax that controls the final rendering of the document. Thus far we’ve only implemented HTML output, as specified in the YAML. Consequently, output is converted to table coding conventions associated with HTML. It is a minimalist approach.</p>
<p>A second approach is to control output of the entire RMarkdown document by using <a href="http://www.w3schools.com/css/css_intro.asp">CSS control</a>. Use of CSS control for RMarkdown output is discussed in detail below under Advanced RMarkdown topics, so it won’t be discussed here. Instead we’ll focus on ways to apply some R packages to create tables.</p>
<p>(<strong>Full Disclosure:</strong> I’ve been cheating thus far; this document has CSS control, while the output you’ve clicked on and followed is RMarkdown default <code>HTML</code> without any CSS control.)</p>
<div id="use-of-r-packages-for-table-control" class="section level3">
<h3 class="hasAnchor">
<a href="#use-of-r-packages-for-table-control" class="anchor"></a>Use of R Packages for Table Control</h3>
<p>There are several packages in R that provide control over table construction. These include the function <code>kable</code> within package <a href="https://cran.r-project.org/web/packages/knitr/index.html"><code>knitr</code></a>, and the packages <a href="https://cran.r-project.org/web/packages/pander/index.html"><code>pander</code></a> and <a href="https://cran.r-project.org/web/packages/xtable/index.html"><code>xtable</code></a>. Here we’ll explore how these packages improve how tables looks visually, as well as how these packages and their functions can directly work with basic R code to generate tables.</p>
<p>We will use the osprey data set (<code>f1</code>) from above. The data in the R dataframe look like this:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">  f1 <span class="co"># examine dataframe f1</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="co">#&gt;   ospreysex fishspp count</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="co">#&gt; 1      Male Sunfish    59</span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="co">#&gt; 2    Female Sunfish    72</span></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="co">#&gt; 3      Male    Bass    14</span></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="co">#&gt; 4    Female    Bass    21</span></a>
<a class="sourceLine" id="cb5-7" title="7"><span class="co">#&gt; 5      Male    Shad   189</span></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="co">#&gt; 6    Female    Shad   138</span></a></code></pre></div>
</div>
<div id="build-a-table-using-the-kable-function-from-package-knitr" class="section level3">
<h3 class="hasAnchor">
<a href="#build-a-table-using-the-kable-function-from-package-knitr" class="anchor"></a>Build a Table Using the <code>kable</code> Function from Package <code>knitr</code>
</h3>
<p>Assuming your data are in a standard R dataframe, one method to build a table is to load the library <code>knitr</code> and apply the function <code>kable</code> to the data frame, here <code>f1</code>. Important options to consider including are <code>col.names=</code>, where more “readable” labels can be used as table column headers, <code>digits=</code>, which applies a specified rounding to table output, and a vector of data alignment using <code>align=</code>. The <code>caption=</code> option allows for inclusion of a table description.</p>
<pre><code>#### build a table using fxn kable from package knitr
```{r}
  library(knitr)  # load library: knitr
  kable(f1, col.names = c("Sex", "Fish Species", "Frequency"), align = c("l", "c", "r"),
   caption = "Fish capture freqeuncy by osprey sex")
```</code></pre>
<p>The output <code>kable</code> table from the code above <a href="https://tedwards-github.github.io/useRfiles/rmd-files/rmd_basics09.html">looks like this</a>. As mentioned above, this form of table construction in a HTML environmment spans the entire width of the browser page.</p>
</div>
<div id="build-a-table-using-the-package-xtable" class="section level3">
<h3 class="hasAnchor">
<a href="#build-a-table-using-the-package-xtable" class="anchor"></a>Build a Table Using the Package <code>xtable</code>
</h3>
<p><code>xtable</code> has many of the same output options as the <code>kable</code> function, but also allows for more control of table output. A necessary option to include within the <strong>chunk</strong> for a <code>xtable</code> is <code>results="asis"</code>, which renders the results into text. Otherwise <code>xtable</code> <a href="https://tedwards-github.github.io/useRfiles/rmd-files/rmd_basics10.html">returns the code</a> for HTML, or other formats such as LaTex.</p>
<p>Consequently modify the <strong>chunk</strong> as:</p>
<pre><code>#### chunk code to portray the rendered table
```{r, results="asis"}
````</code></pre>
<p><code>xtable</code> also requires a <code><a href="https://rdrr.io/r/base/print.html">print()</a></code> wrapper or the default output is returned as LaTex code rather than text. The option <code>type=</code> specifies the form of the output, as in HTML. As with <code>kable</code>, some available formatting options include digits, alignments, and captions. Row numbers are printed by default; use <code>include.rownames = F</code> to turn them off.</p>
<pre><code>#### build a table using xtable
```{r, results="asis"}
  library(xtable)
# xtable(f1)  NOT RUN: would return a default table of LaTex code
  print(xtable(f1), type="html", include.rownames = F)  # rendered table in html format
```</code></pre>
<p><strong>NOTE</strong> that <a href="https://tedwards-github.github.io/useRfiles/rmd-files/rmd_basics11.html">basic <code>xtable</code> output</a> includes <code><a href="https://rdrr.io/r/base/Logic.html">|</a></code> (vertical bar) as a separator between table cells, and that the data seem “squished” in appearance. This appearance, as well as many other aspects of table appearance, can be controlled from within <code>xtable</code>. The <a href="https://cran.r-project.org/web/packages/xtable/vignettes/xtableGallery.pdf">xtable Gallery</a> is an excellent PDF vignette full of examples on how to format tables.</p>
<p>Assume you wish to change the sequential cell alignment to left, center, right. This is the option <code>align=</code> where <code>r</code>, <code>l</code>, and <code>c</code> represent right, left, and center, respectively. Assign the desired option with the initial <code>xtable</code> call and save it as an object (here, <code>tab1</code>). The apply the <code><a href="https://rdrr.io/r/base/print.html">print()</a></code> wrapper to the object. An oddity to note: <code>xtable</code> automatically includes row numbers and you must format for that column, even if your intention is to suppress row numbers the final rendering of the text with <code><a href="https://rdrr.io/r/base/print.html">print()</a></code>.</p>
<p>Adding “readable” column names can be done within <code>xtable</code>, but it can be ponderous. Because output from <code>xtable</code> inherits the original dataframe, it is easier to apply <code><a href="https://rdrr.io/r/base/names.html">names()</a></code> to the <code>xtable</code> object prior to rendering using <code><a href="https://rdrr.io/r/base/print.html">print()</a></code>.</p>
<p>One consideration regarding formatting in <code>xtable</code>. Above, the <code><a href="https://rdrr.io/r/base/print.html">print()</a></code> wrapper was placed outside the <code>xtable()</code> call and all table syntax rendered in a single line of code. For reason(s) I cannot fully figure out, format control seemingly works best if applied and saved as an <code>xtable</code> object, and then having the object rendered from inside the <code><a href="https://rdrr.io/r/base/print.html">print()</a></code> wrapper. Attempting all formatting operations within a single call often fails.</p>
<pre><code>#### a xtable with alignment, new column names, and suppressed row names
```{r, results="asis"}
# add format:  alignment
  library(xtable)
# xtable(f1)  NOT RUN: would return a default table of LaTex code
  tab1 &lt;- xtable(f1, align = "llrc")  # formatting outside print() wrapper
  names(tab1) &lt;- c("Sex", "Fish Species", "Frequency")  # rename columns
  print(tab1, type="html", include.rownames = F)  # rendered table in html format
```</code></pre>
<p><a href="https://tedwards-github.github.io/useRfiles/rmd-files/rmd_basics11.html">Compare the two outputs</a> – one without <code>results="asis"</code> and the other with some minimal formatting, including renaming of variables.</p>
</div>
<div id="build-a-table-using-the-package-pander" class="section level3">
<h3 class="hasAnchor">
<a href="#build-a-table-using-the-package-pander" class="anchor"></a>Build a Table Using the Package <code>pander</code>
</h3>
<p>Package <code>pander</code> is another means of formatting tables for output. An added benefit of<code>pander</code> (as well as <code>xtable</code>, actually) is that it can access results of a statistical analysis and print a table of those results.</p>
<p>As with <code>xtable</code>, it is simply easier to create “readable” column names outside the <code>pander()</code> call; here, the variables were renamed before the rendering. <code>justify=</code> controls alignment, and a <code>caption=</code> can be added if desired. A large variety of other <a href="https://rdrr.io/cran/pander/man/pandoc.table.return.html">pander options</a> are available as well.</p>
<pre><code>#### built a table using pander
```{r}
  library(pander)
  names(f1)=c("Sex", "Fish Species", "Frequency")  # rename columns
  pander(f1, caption = "Fish capture frequency by osprey sex", 
   justify = c("right", "center", "center"))  # rendered table in html format
```</code></pre>
<p>Recall from above we accessed the results of the <span class="math inline">\(\chi^2\)</span> analysis (object <code>f3</code>) on osprey foraging, and used inline <strong>chunk</strong> code to present the results as text. Assume instead you wish for a table of those results. Simply call the saved analytical object, here <code>f3</code>, from inside <code>pander()</code>. Note you can even embed mathematical symbols in the caption.</p>
<pre><code>#### render statistical output as a table: chi-sq test from above
```{r}
  library(pander)
  pander(f3, caption = "$\\chi^2$ test of fish capture frequency by osprey sex")
```</code></pre>
<p>You can see the <code>pander</code> table outputs <a href="https://tedwards-github.github.io/useRfiles/rmd-files/rmd_basics12.html">here</a>.</p>
<p>A (mostly complete) list of statistical analyses that <code>pander</code> can render as tables is found by loading the <code>pander</code> library and invoking <code><a href="https://rdrr.io/r/utils/methods.html">methods(pander)</a></code>. Current offerings include:</p>
<pre><code>#&gt;  [1] pander.anova*           pander.aov*            
#&gt;  [3] pander.aovlist*         pander.Arima*          
#&gt;  [5] pander.call*            pander.cast_df*        
#&gt;  [7] pander.character*       pander.clogit*         
#&gt;  [9] pander.coxph*           pander.cph*            
#&gt; [11] pander.CrossTable*      pander.data.frame*     
#&gt; [13] pander.data.table*      pander.Date*           
#&gt; [15] pander.default*         pander.density*        
#&gt; [17] pander.describe*        pander.ets*            
#&gt; [19] pander.evals*           pander.factor*         
#&gt; [21] pander.formula*         pander.ftable*         
#&gt; [23] pander.function*        pander.glm*            
#&gt; [25] pander.Glm*             pander.gtable*         
#&gt; [27] pander.htest*           pander.image*          
#&gt; [29] pander.irts*            pander.list*           
#&gt; [31] pander.lm*              pander.lme*            
#&gt; [33] pander.logical*         pander.lrm*            
#&gt; [35] pander.manova*          pander.matrix*         
#&gt; [37] pander.microbenchmark*  pander.name*           
#&gt; [39] pander.nls*             pander.NULL*           
#&gt; [41] pander.numeric*         pander.ols*            
#&gt; [43] pander.orm*             pander.polr*           
#&gt; [45] pander.POSIXct*         pander.POSIXlt*        
#&gt; [47] pander.prcomp*          pander.randomForest*   
#&gt; [49] pander.rapport*         pander.rlm*            
#&gt; [51] pander.sessionInfo*     pander.smooth.spline*  
#&gt; [53] pander.stat.table*      pander.summary.aov*    
#&gt; [55] pander.summary.aovlist* pander.summary.glm*    
#&gt; [57] pander.summary.lm*      pander.summary.lme*    
#&gt; [59] pander.summary.manova*  pander.summary.nls*    
#&gt; [61] pander.summary.polr*    pander.summary.prcomp* 
#&gt; [63] pander.summary.rms*     pander.summary.survreg*
#&gt; [65] pander.summary.table*   pander.survdiff*       
#&gt; [67] pander.survfit*         pander.survreg*        
#&gt; [69] pander.table*           pander.tabular*        
#&gt; [71] pander.ts*              pander.zoo*            
#&gt; see '?methods' for accessing help and source code</code></pre>
<p><code>pander</code> covers the bulk of traditional statistical analyses, but quoting directly from the <a href="http://rapporter.github.io/pander/">pander: An R Pandoc Writer</a> site:</p>
<blockquote>
<p><em>“If you think that pander lacks support for any other R class(es), please feel free to <a href="https://github.com/Rapporter/pander/pulls">open a ticket</a> suggesting a new feature or <a href="https://github.com/Rapporter/pander/issues">submit a pull request</a> and we will be happy to extend the package.”</em></p>
</blockquote>
<p>In short, the site is open to suggestions for additional forms of statistical analysis to be rendered with <code>pander</code>. In addition, you could create your own function if desired by emulating one of the other functions – that’s where some of the true power of R comes into play!</p>
<hr>
</div>
</div>
<div id="example-4-constructing-figures-in-a-rmarkdown-document" class="section level2">
<h2 class="hasAnchor">
<a href="#example-4-constructing-figures-in-a-rmarkdown-document" class="anchor"></a>EXAMPLE #4: Constructing Figures in a RMarkdown Document</h2>
<p>Embedding a R–generated figure or plot still uses <strong>chunk</strong> code, but with different options for configuration. Beginning simple, consider a barplot of the frequencies of the three groups of fish captured by male and female ospreys and represented in our previous data object <code>f1</code>. Note there are no <strong>chunk</strong> options; just the R code for a barplot is embedded in the <strong>chunk</strong>. Default figure placement is left justification.</p>
<pre><code>#### basic chunk code for embedding a figure
```{r}
# embed a plot
  PLOT CODE HERE ....
```</code></pre>
<p>Here’s some example code …</p>
<pre><code>#### basic barplot inserted as figure in RMarkdown document
```{r}
# embed a barplot; assumes object f1 &amp; f2 from above
  freq.r &lt;- range(0, signif(max(f1$count), 1) + 10)  # use raw data for ylim= range
  bplot1 &lt;- barplot(f2, ylim = freq.r, xlab = "Fish Species", 
   ylab = "Capture Frequency (n)", space = c(0, 0.5), col = c("black", "grey"), beside = T)
  abline(h = 0)  # add line to bottom of plot
  
# add legend
  legend("topleft", c("Female", "Male"), fill = c("black", "grey"), bty = "n", cex = 1.25)
  title(main = "Fish Species Capture Frequency by Osprey Sex")
  text(x = bplot1, y = c(f2[1:6]), labels = c(f2[1:6]), pos = 3)  # adds f2 counts above bars
```</code></pre>
<p>… and a resultant <a href="https://tedwards-github.github.io/useRfiles/rmd-files/rmd_basics13.html">barplot of the osprey fish captures by males and females</a> introduced above.</p>
<div id="some-options-for-rmarkdown-figures" class="section level3">
<h3 class="hasAnchor">
<a href="#some-options-for-rmarkdown-figures" class="anchor"></a>Some Options for RMarkdown Figures</h3>
<p>Two common figure <strong>chunk</strong> options are to specify figure width and height, and create an outfile version of the figure. Default figure size reflects R conventions; 480 <span class="math inline">\(\times\)</span> 480 pixels at 72dpi for bitmap-based output (i.e., <strong>.png</strong>), which translates into an approximate 6.7 <span class="math inline">\(\times\)</span> 6.7 inch size. The option <code>fig.path="PATH/"</code>, where <code>PATH</code> followed by a <code><a href="https://rdrr.io/r/base/Arithmetic.html">/</a></code> (right slash) indicates the directory for the figure.</p>
<p><strong>IMPORTANT</strong>: The specified directory path is from the default directory for the RMarkdown document. Otherwise a full path must be represented.</p>
<pre><code>#### set fig size as 4X4 &amp; establish file outfile path
```{r, fig.width=4, fig.height=4, fig.path="outfigs/"}
```</code></pre>
<p>It may be beneficial to simultaneously plot a vector-based plot (i.e., <strong>.pdf</strong>, <strong>.eps</strong>) for archiving along with a bitmap-based (i.e., <strong>.png</strong>) plot for the document. Simply suppress the R code and output using the <strong>chunk</strong> option <code>include=F</code>, and outfile the figure to the desired directory.</p>
<pre><code>#### suppress all output, &amp; build PDF figure for output
```{r, include=F, fig.width=4, fig.height=4}
# create a duplicate of figure in pdf outfile
  pdf("PATH4FILE/FIGURENAME.pdf") 
# plot code would follow here
  CODE CODE CODE ....
  dev.off()
```</code></pre>
<p><strong>NOTE</strong> there exists potential to alter figure placement by using the option <code>align="center"</code>, which uses HTML tag <code>&lt;img /&gt;</code> rather than the RMarkdown <code>![]()</code> syntax. However, alignment other than left justified is not supported within HTML5, so it is best to not use alignments other than the default in HTML documents. See the CSS HTML site for details on <code>&lt;img /&gt;</code> <a href="http://www.w3schools.com/tags/tag_img.asp">tag control</a>.</p>
<p>Be careful with sizing as it sometimes clips figure output unless the width:height ratio is considered. This, however, is the same issue faced with any plot in R. If you wish global control over figure characteristics, such as a desire for all figures to be of same width and height, or a common outfile directory, these can be inserted as options under the <code>{r global_options}</code>, much as shown for <strong>warnings</strong> above.</p>
<p>Last, do not forget it is R coding that determines characteristics of your RMarkdown figure. This means any type of plot that is possible in R can be embedded into your document. <a href="https://tedwards-github.github.io/useRfiles/rmd-files/rmd_basics14.html">Check out results</a> of the options for figures we discussed here.</p>
<p>The <a href="http://yihui.name/knitr/"><code>knitr</code> website</a> lists all available <strong>chunk</strong> <a href="http://yihui.name/knitr/options/">options for plots and figures</a>, including figure control for documents other than HTML output.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#embedding-and-implementing-r-code-into-a-rmarkdown-document">Embedding and Implementing R Code into a RMarkdown Document</a></li>
      <li><a href="#example-1-embedding-and-executing-r-code">EXAMPLE #1: Embedding and Executing R Code</a></li>
      <li><a href="#example-2-converting-the-analysis-to-kings-english">EXAMPLE #2: Converting the Analysis to King’s English</a></li>
      <li><a href="#example-3-extracting-and-presenting-tabular-information">EXAMPLE #3: Extracting and Presenting Tabular Information</a></li>
      <li><a href="#example-4-constructing-figures-in-a-rmarkdown-document">EXAMPLE #4: Constructing Figures in a RMarkdown Document</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Thomas Edwards.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.9100.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
